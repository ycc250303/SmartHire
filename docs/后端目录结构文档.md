# SmartHire 后端目录结构文档

## 1. 项目概述

SmartHire 后端采用 Spring Boot 3.5.7 + MyBatis-Plus 架构，采用模块化设计，遵循分层架构模式。

## 2. 根目录结构

```
SmartHire_Backend/
├── database/                   # 数据库相关文件
│   ├── DATABASE_DESIGN.md      # 数据库设计文档
│   └── schema_phase1.sql       # 第一阶段数据库表结构
├── src/                        # 源代码目录
│   ├── main/                   # 主代码目录
│   │   ├── java/               # Java 源代码
│   │   └── resources/          # 资源文件
│   └── test/                   # 测试代码目录
├── target/                     # 编译输出目录
├── pom.xml                     # Maven 项目配置文件
├── mvnw                        # Maven Wrapper (Unix)
├── mvnw.cmd                    # Maven Wrapper (Windows)
└── HELP.md                     # 项目说明文档
```

## 3. 源代码目录结构

### 3.1 Java 源代码结构 (`src/main/java/com/SmartHire/`)

以 userAuthService为例

```
com/SmartHire/
├── SmartHireBackendApplication.java    # Spring Boot 主启动类
│
├── codeGenerator/                      # 代码生成器模块
│   └── SeekerCodeGenerator.java       # 求职者服务代码生成器
│
├── userAuthService/                   # 用户认证服务模块
│   ├── config/                       # 配置类
│   │   └── SecurityConfig.java       # Spring Security 配置
│   │
│   ├── controller/                   # 控制器层
│   │   └── UserAuthController.java  # 用户认证控制器
│   │
│   ├── dto/                          # 数据传输对象
│   │   ├── LoginDTO.java            # 登录请求 DTO
│   │   └── RegisterDTO.java         # 注册请求 DTO
│   │
│   ├── mapper/                       # 数据访问层
│   │   ├── UserAuthMapper.java
│   │   └── xml/                      # MyBatis XML 映射文件
│   │       └── UserAuthMapper.xml
│   │
│   ├── model/                        # 实体模型层
│   │   └── User.java                # 用户实体
│   │
│   ├── service/                      # 业务逻辑层
│   │   ├── EmailService.java        # 邮件服务接口
│   │   ├── UserAuthService.java     # 用户认证服务接口
│   │   ├── VerificationCodeService.java  # 验证码服务接口
│   │   └── impl/                     # 服务实现类
│   │       ├── EmailServiceImpl.java
│   │       ├── UserAuthServiceImpl.java
│   │       └── VerificationCodeServiceImpl.java
│   │
│   ├── userAuthApplication.java     # 用户认证服务应用类
│   │
│   └── utils/                        # 工具类
│       ├── EmailValidatorUtil.java  # 邮箱验证工具
│       ├── PasswordValidatorUtil.java  # 密码验证工具
│       └── ValidPasswordUtil.java   # 密码验证注解
│
└── shared/                            # 共享模块
    ├── entity/                       # 共享实体类
    │   └── Result.java              # 统一响应结果封装
    │
    ├── exception/                    # 异常处理
    │   ├── enums/                    # 异常枚举
    │   │   └── ErrorCode.java       # 错误码枚举
    │   ├── exception/                # 异常类
    │   │   ├── AuthenticationException.java  # 认证异常
    │   │   ├── BaseException.java   # 基础异常类
    │   │   └── BusinessException.java  # 业务异常
    │   └── handler/                  # 异常处理器
    │       └── GlobalExceptionHandler.java  # 全局异常处理器
    │
    └── utils/                        # 共享工具类
        ├── JwtUtil.java             # JWT 工具类
        └── VerificationCodeGeneratorUtil.java  # 验证码生成工具
```

### 3.2 资源文件结构 (`src/main/resources/`)

```
resources/
├── application.yml                  # 主配置文件
├── application-seeker-service.yml  # 求职者服务配置
├── application-userAuth-service.yml # 用户认证服务配置
├── static/                         # 静态资源目录
└── templates/                      # 模板文件目录
```

### 3.3 测试代码结构 (`src/test/java/`)

```
test/java/com/SmartHire/
└── SmartHireBackendApplicationTests.java  # 主应用测试类
```

## 4. 模块说明

### 4.2 Service（服务模块）

- **controller**：用于接收 HTTP 请求，并调用 Service 层处理
- **service**：处理业务逻辑
- **dto**：请求参数封装
- **mapper**：数据访问层
- **model**：实体模型层
- **utils**：工具类

### 4.2 shared（共享模块）

提供项目内各模块共享的功能：

- **entity**：统一响应结果封装（Result）
- **exception**：全局异常处理机制
- **utils**：JWT 工具、验证码生成等共享工具

### 4.3 codeGenerator（代码生成器模块）

用于自动生成 MyBatis-Plus 相关代码，提高开发效率。

## 5. 分层架构说明

项目采用经典的三层架构模式：

```
┌─────────────────────────────────┐
│      Controller 层              │  处理 HTTP 请求，参数校验
│      (RESTful API)              │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Service 层                 │  业务逻辑处理
│      (业务服务)                 │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Mapper 层                  │  数据库访问
│      (数据访问)                 │
└─────────────────────────────────┘
```

### 5.1 Controller 层

- 职责：接收 HTTP 请求，参数校验，调用 Service 层，返回响应
- 注解：`@RestController`、`@RequestMapping`、`@PostMapping` 等
- 返回：统一使用 `Result<T>` 封装响应

### 5.2 Service 层

- 接口命名：`I{Entity}Service`
- 实现类命名：`{Entity}ServiceImpl`
- 职责：业务逻辑处理，事务管理
- 注解：`@Service`

### 5.3 Mapper 层

- 接口命名：`{Entity}Mapper`
- 职责：数据库 CRUD 操作
- 继承：`BaseMapper<T>`（MyBatis-Plus）
- XML 映射文件：位于 `mapper/xml/` 目录

### 5.4 Model 层

- 职责：实体类，对应数据库表
- 注解：`@TableName`、`@TableId`、`@Getter`、`@Setter`
- 使用 Lombok 简化代码

## 6. 配置文件说明

### 6.1 application.yml

主配置文件，包含通用配置。

### 6.2 application-seeker-service.yml

求职者服务模块的特定配置。

### 6.3 application-userAuth-service.yml

用户认证服务模块的特定配置。

## 7. 开发规范

1. **模块化设计**：按业务功能划分模块，每个模块独立管理
2. **分层清晰**：Controller → Service → Mapper 三层架构
3. **统一响应**：使用 `Result<T>` 统一封装 API 响应
4. **异常处理**：使用全局异常处理器统一处理异常
5. **代码生成**：使用代码生成器自动生成基础 CRUD 代码

## 8. 其他

- **static/**：静态资源目录，可用于存放上传的文件
- **templates/**：模板文件目录，可用于邮件模板等
